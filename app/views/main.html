<div class="pace-row" ng-controller="MainCtrl">
  <div class="choice text-center">
    <h2><strong>Choose one</strong></h2>
  </div>

  <form name="paceInputForm" ng-submit="runCalculation()">
    <div class="row focused-on-{{activeInput}} stage">
      <div class="distance-input-container col-md-4">
        <label for="distance">Distance</label>
        <div ng-class="{'input-group': activeInput === 'distance'}">
          <input name="distance" type="text" class="form-control pace-input" placeholder="Distance"
            ng-pattern=/^[0-9]*(\.[0-9]+)?$/
            ng-model="pacerVariables.distance.number"
            ng-change="paceValuesChanged('distance')"
            ng-disabled="pacerVariables.distance.isDisabled"
            ng-class="{'input-error': paceInputForm.distance.$invalid}"
            ng-focus="activeInput = 'distance'"
            ng-blur="activeInput=''">
          <span ng-show="activeInput === 'distance'" class="input-group-addon commit"><i class="fa fa-check"></i></span>
        </div>
        <span class="error" ng-show="paceInputForm.distance.$invalid">
          <small>Invalid distance!</small>
        </span>
      </div>
      <div class="rate-input-container col-md-4">
        <div class="form-group">
          <label for="rate">Pace</label>
          <div ng-class="{'input-group': activeInput === 'rate'}">
            <input name="rate" type="text" class="form-control pace-input" placeholder="mm:ss"
              ng-pattern=/^[0-5]?\d:[0-5]\d$/
              ng-model="pacerVariables.rate.number" 
              ng-change="paceValuesChanged('rate')"
              ng-disabled="pacerVariables.rate.isDisabled"
              ng-class="{'input-error': paceInputForm.rate.$invalid}"
              ng-focus="activeInput = 'rate'"
              ng-blur="activeInput=''">
            <span ng-show="activeInput === 'rate'" class="input-group-addon commit"><i class="fa fa-check"></i></span>
          </div>
          <span class="error" ng-show="paceInputForm.rate.$invalid">
          <small>Invalid Pace!</small>
        </span>
        </div>
      </div>
      <div class="duration-input-container col-md-4">
        <div class="form-group">
          <label for="duration">Duration</label>
          <div ng-class="{'input-group': activeInput === 'duration'}">
            <input name="duration" type="text" class="form-control pace-input" placeholder="hh:mm:ss"
              ng-pattern=/^(\d+:)?([0-5]\d):([0-5]\d)$/
              ng-model="pacerVariables.duration.number"
              ng-change="paceValuesChanged('duration')"
              ng-disabled="pacerVariables.duration.isDisabled"
              ng-class="{'input-error': paceInputForm.duration.$invalid}"
              ng-focus="activeInput = 'duration'"
              ng-blur="activeInput=''">
            <span ng-show="activeInput === 'duration'" class="input-group-addon commit"><i class="fa fa-check"></i></span>
          </div>
          <span class="error" ng-show="paceInputForm.duration.$invalid">
            <small>Invalid duration!</small>
          </span>
        </div>
      </div>
    </div>
    <div class="row">
      <button class="btn btn-default" type="button" ng-click="reset()">Reset</button>
      <button class="btn btn-success pull-right" type="submit" ng-disabled="disableCalculation">Run!</button>
  </div>
  </form>
  
  <!-- <div class="well well-lg" ng-show="resultMessage"> -->
    <h4 class="text-center result-message">{{ resultMessage }}</h4>
    <!-- <h4>Distance: <small>{{ pacerVariables.distance.number }}</small></h4> -->
    <!-- <h4>Rate: <small>{{ pacerVariables.rate.number }}</small></h4> -->
    <!-- <h4>Duration: <small>{{ pacerVariables.duration.number }}</small></h4> -->
  <!-- </div> -->

  <div class="checkbox">
    <label><input type="checkbox" ng-model="showSplits" > Splits</label>
  </div>
  <div ng-show="showSplits" class="well well-sm splits-table">
    <table class="table table-striped table-condensed table-bordered">
        <tbody>
          <th>Mile</th>
          <th>Elapsed Time</th>
          <tr ng-repeat="split in splits">
            <td>{{ split.mile }}</td>
            <td>{{ split.elapsedTime }}</td>
          </tr>
        </tbody>
      </table>
  </div>

</div>